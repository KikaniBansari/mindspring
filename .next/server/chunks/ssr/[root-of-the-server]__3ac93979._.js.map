{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/session/play/page.tsx"],"sourcesContent":["\n\"use client\";\n\nimport { Suspense, useEffect, useState, useRef, useCallback } from 'react';\nimport { useSearchParams, useRouter } from 'next/navigation';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport React from 'react';\n\n// --- SHARED TIMER COMPONENT ---\nfunction GameTimer({ onTimeUp }: { onTimeUp: () => void }) {\n  const [timeLeft, setTimeLeft] = useState(180);\n\n  useEffect(() => {\n    if (timeLeft === 0) {\n      onTimeUp();\n      return;\n    }\n\n    const intervalId = setInterval(() => {\n      setTimeLeft((prev) => prev - 1);\n    }, 1000);\n\n    return () => clearInterval(intervalId);\n  }, [timeLeft, onTimeUp]);\n\n  const minutes = Math.floor(timeLeft / 60);\n  const seconds = timeLeft % 60;\n\n  return (\n    <div className=\"absolute top-4 right-4 bg-background/80 px-4 py-2 rounded-full shadow-md z-50\">\n      <span className=\"font-mono text-lg font-semibold text-foreground\">\n        {String(minutes).padStart(2, '0')}:{String(seconds).padStart(2, '0')}\n      </span>\n    </div>\n  );\n}\n\n\n// --- WAVE SORTER GAME (New for Overwhelmed) ---\nconst WaveSorterGame = ({ onThoughtsChange }: { onThoughtsChange: React.Dispatch<React.SetStateAction<string>> }) => {\n    const gameAreaRef = useRef<HTMLDivElement>(null);\n    const [waves, setWaves] = useState<{ id: number; color: string; x: number; y: number; originalX: number; originalY: number; isReturning: boolean; }[]>([]);\n    const [draggedWave, setDraggedWave] = useState<number | null>(null);\n    const timeElapsed = useRef(0);\n\n    const laneColors = [\"#AEE4FF\", \"#D8C8FF\", \"#FFD1B3\", \"#C9F7D2\"];\n    const laneMeanings = [\"Calm\", \"Focus\", \"Let Go\", \"Pause\"];\n\n    // Spawn waves based on elapsed time\n    useEffect(() => {\n        const getSpawnInterval = () => {\n            if (timeElapsed.current < 30) return 1200;\n            if (timeElapsed.current < 90) return 900;\n            if (timeElapsed.current < 150) return 700;\n            return 550;\n        };\n\n        const spawnInterval = setInterval(() => {\n            const gameArea = gameAreaRef.current?.getBoundingClientRect();\n            if (!gameArea) return;\n            const newWave = {\n                id: Date.now(),\n                color: laneColors[Math.floor(Math.random() * laneColors.length)],\n                x: gameArea.width / 2,\n                y: gameArea.height + 30,\n                originalX: gameArea.width / 2,\n                originalY: gameArea.height + 30,\n                isReturning: false,\n            };\n            setWaves(prev => [...prev, newWave]);\n        }, getSpawnInterval());\n        \n        const timerInterval = setInterval(() => {\n            timeElapsed.current += 1;\n        }, 1000);\n\n        return () => {\n            clearInterval(spawnInterval);\n            clearInterval(timerInterval);\n        }\n    }, []);\n\n    // Animate waves rising and returning\n    useEffect(() => {\n        const animationInterval = setInterval(() => {\n            setWaves(prev =>\n                prev.map(wave => {\n                    if (wave.isReturning) {\n                        // Animate back to center\n                        const dx = wave.originalX - wave.x;\n                        const dy = wave.originalY - wave.y;\n                        if (Math.abs(dx) < 2 && Math.abs(dy) < 2) {\n                            return { ...wave, isReturning: false, x: wave.originalX, y: wave.originalY -1 };\n                        }\n                        return { ...wave, x: wave.x + dx * 0.1, y: wave.y + dy * 0.1 };\n                    }\n                    return { ...wave, y: wave.y - 1 }\n                }).filter(wave => wave.y > -50) // Remove waves that have gone off-screen\n            );\n        }, 30);\n\n        return () => clearInterval(animationInterval);\n    }, []);\n\n    const handlePointerDown = (waveId: number) => {\n        setDraggedWave(waveId);\n        setWaves(prev => prev.map(w => w.id === waveId ? {...w, isReturning: false} : w));\n    };\n\n    const handlePointerMove = (e: React.PointerEvent<HTMLDivElement>) => {\n        if (draggedWave === null) return;\n        const gameArea = gameAreaRef.current?.getBoundingClientRect();\n        if (!gameArea) return;\n        \n        setWaves(prev =>\n            prev.map(wave =>\n                wave.id === draggedWave\n                    ? { ...wave, x: e.clientX - gameArea.left, y: e.clientY - gameArea.top }\n                    : wave\n            )\n        );\n    };\n    \n    const handlePointerUp = () => {\n        if (draggedWave === null) return;\n        \n        const wave = waves.find(w => w.id === draggedWave);\n        const gameArea = gameAreaRef.current?.getBoundingClientRect();\n        if (!wave || !gameArea) {\n            setDraggedWave(null);\n            return;\n        };\n\n        const laneWidth = gameArea.width / laneColors.length;\n        const laneIndex = Math.floor(wave.x / laneWidth);\n        const waveColorIndex = laneColors.indexOf(wave.color);\n\n        if (laneIndex >= 0 && laneIndex < laneColors.length && laneIndex === waveColorIndex) {\n            // Correctly sorted\n            onThoughtsChange(prev => prev + \"S\");\n            setWaves(prev => prev.filter(w => w.id !== draggedWave));\n        } else {\n            // Incorrectly sorted - send it back\n            setWaves(prev => prev.map(w => w.id === draggedWave ? {...w, isReturning: true} : w));\n        }\n        setDraggedWave(null);\n    };\n\n    return (\n        <div \n            ref={gameAreaRef}\n            className=\"w-full h-full flex-1 flex flex-col bg-gradient-to-b from-[#E0F7FA] to-[#E7D9FF] rounded-2xl p-4 gap-2 overflow-hidden relative select-none\"\n            onPointerMove={handlePointerMove}\n            onPointerUp={handlePointerUp}\n            onPointerLeave={handlePointerUp}\n        >\n            {/* Lanes */}\n            <div className=\"absolute inset-0 flex z-0\">\n                {laneColors.map((color, index) => (\n                    <div key={index} className=\"flex-1 border-r border-white/30 last:border-r-0 flex flex-col items-center pt-4\">\n                        <p className=\"font-semibold\" style={{color: color, textShadow: '0 0 10px #ffffff'}}>{laneMeanings[index]}</p>\n                    </div>\n                ))}\n            </div>\n\n            {/* Waves */}\n            <AnimatePresence>\n            {waves.map(wave => (\n                <motion.div\n                    key={wave.id}\n                    className=\"absolute w-16 h-16 rounded-full cursor-grab\"\n                    style={{\n                        backgroundColor: wave.color,\n                        left: wave.x - 32,\n                        top: wave.y - 32,\n                        boxShadow: `0 0 20px ${wave.color}, 0 0 5px white inset`,\n                        border: '2px solid white'\n                    }}\n                    onPointerDown={() => handlePointerDown(wave.id)}\n                    animate={{ \n                        scale: draggedWave === wave.id ? 1.2 : 1,\n                    }}\n                    exit={{ opacity: 0, scale: 0.5, transition: { duration: 0.3 } }}\n                    whileHover={{ scale: 1.1 }}\n                />\n            ))}\n            </AnimatePresence>\n        </div>\n    );\n};\n\n\n// --- TENSION THREADS GAME (New for Stressed) ---\nconst TensionThreadsGame = ({ onThoughtsChange }: { onThoughtsChange: React.Dispatch<React.SetStateAction<string>> }) => {\n    const NUM_THREADS = 7;\n    const initialThreads = Array.from({ length: NUM_THREADS }, (_, i) => ({\n        id: i,\n        tension: Math.random() * 20,\n        angle: (i / NUM_THREADS) * 360,\n    }));\n\n    const [threads, setThreads] = useState(initialThreads);\n    const gameAreaRef = useRef<HTMLDivElement>(null);\n\n    // Game loop for tension increase\n    useEffect(() => {\n        const gameInterval = setInterval(() => {\n            setThreads(prevThreads => \n                prevThreads.map(thread => ({\n                    ...thread,\n                    tension: Math.min(100, thread.tension + 0.5), // Slow constant increase\n                }))\n            );\n        }, 100);\n\n        // Stress waves\n        const waveInterval = setInterval(() => {\n            setThreads(prevThreads => \n                prevThreads.map(thread => ({\n                    ...thread,\n                    tension: Math.min(100, thread.tension + Math.random() * 15 + 10),\n                }))\n            );\n            onThoughtsChange(prev => prev + \"w\");\n        }, 6000);\n\n        return () => {\n            clearInterval(gameInterval);\n            clearInterval(waveInterval);\n        };\n    }, [onThoughtsChange]);\n\n    const relaxThread = (id: number) => {\n        setThreads(prevThreads =>\n            prevThreads.map(thread =>\n                thread.id === id ? { ...thread, tension: Math.max(0, thread.tension - 25) } : thread\n            )\n        );\n        onThoughtsChange(prev => prev + \"r\");\n    };\n\n    const getThreadColor = (tension: number) => {\n        if (tension > 80) return \"hsl(var(--destructive))\"; \n        if (tension > 50) return \"#f97316\"; // orange-500\n        return \"hsl(var(--primary))\"; \n    };\n\n    const center = { x: (gameAreaRef.current?.clientWidth || 300) / 2, y: (gameAreaRef.current?.clientHeight || 400) / 2 };\n    const length = Math.min(center.x, center.y) * 0.8;\n\n    return (\n        <div ref={gameAreaRef} className=\"w-full h-full flex-1 flex flex-col items-center justify-center bg-card rounded-2xl p-4 gap-2 overflow-hidden relative select-none\">\n            <p className=\"text-muted-foreground text-sm text-center z-10 absolute top-10\">Swipe along the threads to release tension.</p>\n\n            <div className=\"absolute inset-0 flex items-center justify-center\">\n                 <motion.div\n                    className=\"w-16 h-16 rounded-full bg-card-foreground/10\"\n                    animate={{ \n                       scale: 1 + threads.reduce((acc, t) => acc + t.tension, 0) / (threads.length * 100) * 0.5,\n                     }}\n                    transition={{ type: 'spring', stiffness: 200, damping: 10 }}\n                 />\n            </div>\n\n            <svg className=\"absolute inset-0 w-full h-full\" style={{ touchAction: 'none' }}>\n                {threads.map(thread => {\n                    const tensionRatio = thread.tension / 100;\n                    const endX = center.x + Math.cos(thread.angle * Math.PI / 180) * length;\n                    const endY = center.y + Math.sin(thread.angle * Math.PI / 180) * length;\n\n                    const controlX = center.x + Math.cos(thread.angle * Math.PI / 180) * length * 0.5;\n                    const controlY = center.y + Math.sin(thread.angle * Math.PI / 180) * length * 0.5;\n                    \n                    const sway = Math.sin(Date.now() / (500 + tensionRatio * 500)) * (tensionRatio * 20);\n                    const swayAngle = (thread.angle + 90) * Math.PI / 180;\n                    \n                    const controlPointX = controlX + Math.cos(swayAngle) * sway;\n                    const controlPointY = controlY + Math.sin(swayAngle) * sway;\n\n                    return (\n                        <motion.path\n                            key={thread.id}\n                            d={`M ${center.x} ${center.y} Q ${controlPointX} ${controlPointY}, ${endX} ${endY}`}\n                            stroke={getThreadColor(thread.tension)}\n                            strokeWidth={5 + tensionRatio * 10}\n                            fill=\"none\"\n                            onPointerEnter={() => relaxThread(thread.id)}\n                            style={{ cursor: 'pointer', filter: `drop-shadow(0 0 ${tensionRatio * 10}px ${getThreadColor(thread.tension)})` }}\n                            animate={{\n                                stroke: getThreadColor(thread.tension),\n                                strokeWidth: 5 + tensionRatio * 10\n                            }}\n                            transition={{ duration: 0.2 }}\n                        />\n                    );\n                })}\n            </svg>\n        </div>\n    );\n};\n\n\n// --- THOUGHT CONSTELLATIONS GAME (New for Full Mind) ---\nconst ThoughtConstellationsGame = ({ onThoughtsChange }: { onThoughtsChange: React.Dispatch<React.SetStateAction<string>> }) => {\n  const gameAreaRef = useRef<HTMLDivElement>(null);\n  const [stars, setStars] = useState<Star[]>([]);\n  const [lines, setLines] = useState<Line[]>([]);\n  const [drawing, setDrawing] = useState<boolean>(false);\n  const [currentPath, setCurrentPath] = useState<Star[]>([]);\n  const [previewLine, setPreviewLine] = useState<{ x1: number; y1: number; x2: number; y2: number } | null>(null);\n\n  type Star = {\n    id: number;\n    x: number;\n    y: number;\n    label: string;\n  };\n  \n  type Line = {\n    from: number;\n    to: number;\n    id: number;\n  };\n\n  const spawnStar = useCallback((): Star => {\n    const gameArea = gameAreaRef.current?.getBoundingClientRect();\n    const width = gameArea?.width || 340;\n    const height = gameArea?.height || 400;\n    return {\n      id: Date.now() + Math.random(),\n      x: Math.random() * (width - 40) + 20,\n      y: Math.random() * (height - 40) + 20,\n      label: `${Math.floor(Math.random() * 99) + 1}`,\n    };\n  }, []);\n\n  useEffect(() => {\n    // Initial spawn\n    const initialStars: Star[] = [];\n    for (let i = 0; i < 15; i++) {\n      initialStars.push(spawnStar());\n    }\n    setStars(initialStars);\n  }, [spawnStar]);\n  \n  // Continuous star generation\n  useEffect(() => {\n    const interval = setInterval(() => {\n        setStars(prev => {\n            if (prev.length < 20) {\n                return [...prev, spawnStar()];\n            }\n            return prev;\n        });\n    }, 3000);\n    return () => clearInterval(interval);\n  }, [spawnStar]);\n\n  const handleStarMouseDown = (star: Star, e: React.MouseEvent) => {\n    e.preventDefault();\n    if (currentPath.find(p => p.id === star.id)) return;\n    setDrawing(true);\n    setCurrentPath([star]);\n    const rect = gameAreaRef.current!.getBoundingClientRect();\n    setPreviewLine({ x1: star.x, y1: star.y, x2: e.clientX - rect.left, y2: e.clientY - rect.top });\n  };\n  \n  const handleMouseMove = (e: React.MouseEvent) => {\n    if (!drawing || currentPath.length === 0) return;\n    const rect = gameAreaRef.current!.getBoundingClientRect();\n    const lastStar = currentPath[currentPath.length - 1];\n    setPreviewLine({ x1: lastStar.x, y1: lastStar.y, x2: e.clientX - rect.left, y2: e.clientY - rect.top });\n  };\n\n  const handleStarMouseOver = (hoveredStar: Star) => {\n    if (!drawing || currentPath.length === 0) return;\n    if (currentPath.find(p => p.id === hoveredStar.id)) return;\n\n    const lastStar = currentPath[currentPath.length - 1];\n    setLines(prev => [...prev, { from: lastStar.id, to: hoveredStar.id, id: Date.now() + Math.random() }]);\n    setCurrentPath(prev => [...prev, hoveredStar]);\n  };\n\n  const handleMouseUp = () => {\n    if (drawing) {\n        if (currentPath.length > 2) { // Finalize constellation\n            onThoughtsChange(prev => prev + `C[${currentPath.length}]`);\n            \n            const pathIds = new Set(currentPath.map(s => s.id));\n            const lineIds = new Set(lines.filter(l => pathIds.has(l.from) && pathIds.has(l.to)).map(l => l.id));\n\n            // Add flash effect via state\n            setStars(prevStars => prevStars.map(s => pathIds.has(s.id) ? {...s, justCompleted: true} : s));\n\n            setTimeout(() => {\n                setStars(prev => prev.filter(s => !pathIds.has(s.id)));\n                setLines(prev => prev.filter(l => !lineIds.has(l.id) ));\n                \n                const newStars = [];\n                for(let i=0; i<currentPath.length; i++) {\n                    newStars.push(spawnStar());\n                }\n                setStars(prev => [...prev, ...newStars]);\n            }, 300);\n        }\n    }\n    setDrawing(false);\n    setCurrentPath([]);\n    setPreviewLine(null);\n  };\n\n  const getStarById = (id: number) => stars.find(s => s.id === id);\n\n\n  return (\n    <div \n        className=\"w-full h-full flex-1 flex flex-col items-center justify-center bg-gray-900 rounded-2xl p-4 gap-2 overflow-hidden\"\n        ref={gameAreaRef}\n        onMouseMove={handleMouseMove}\n        onMouseUp={handleMouseUp}\n        onMouseLeave={handleMouseUp}\n    >\n      <p className=\"text-blue-200/80 text-sm text-center mb-2 z-10\">Draw lines between thought-stars to form constellations.</p>\n      <div className=\"relative w-full h-full\">\n        {/* Render lines */}\n        <svg className=\"absolute inset-0 w-full h-full\" style={{ zIndex: 1 }}>\n          {lines.map((line) => {\n            const fromStar = getStarById(line.from);\n            const toStar = getStarById(line.to);\n            if (!fromStar || !toStar) return null;\n            return (\n              <motion.line\n                key={line.id}\n                x1={fromStar.x}\n                y1={fromStar.y}\n                x2={toStar.x}\n                y2={toStar.y}\n                stroke=\"rgba(191, 219, 254, 0.7)\"\n                strokeWidth=\"2\"\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n              />\n            );\n          })}\n          {previewLine && (\n             <line\n                x1={previewLine.x1}\n                y1={previewLine.y1}\n                x2={previewLine.x2}\n                y2={previewLine.y2}\n                stroke=\"hsl(var(--accent))\"\n                strokeWidth=\"2\"\n                strokeDasharray=\"4 4\"\n            />\n          )}\n        </svg>\n        \n        {/* Render stars */}\n        <AnimatePresence>\n          {stars.map(star => (\n            <motion.div\n              key={star.id}\n              initial={{ opacity: 0, scale: 0.5 }}\n              animate={{ \n                opacity: 1, \n                scale: 1,\n              }}\n              exit={{ opacity: 0, scale: 0.5, transition: { duration: 0.3 } }}\n              onMouseDown={(e) => handleStarMouseDown(star, e)}\n              onMouseOver={() => handleStarMouseOver(star)}\n              className={`absolute w-8 h-8 rounded-full flex items-center justify-center cursor-crosshair transition-all duration-200 bg-blue-100/80\n                ${currentPath.find(p => p.id === star.id) ? 'ring-2 ring-yellow-300' : ''}\n              `}\n              style={{\n                left: star.x - 16,\n                top: star.y - 16,\n                zIndex: 2,\n                boxShadow: '0 0 12px 3px rgba(191, 219, 254, 0.5)'\n              }}\n            >\n                <span className=\"text-black font-bold text-sm\">{star.label}</span>\n            </motion.div>\n          ))}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n};\n\n\n// --- FOG LIFT GAME (Foggy) ---\nconst FoggyGame = ({ onThoughtsChange }: { onThoughtsChange: React.Dispatch<React.SetStateAction<string>> }) => {\n  const [cleared, setCleared] = useState<boolean[][]>(\n    Array(5).fill(null).map(() => Array(5).fill(false))\n  );\n  const [fogOpacity, setFogOpacity] = useState(1);\n  const clearedCountRef = React.useRef(0);\n\n  const handleSwipe = (r: number, c: number) => {\n    if (cleared[r][c]) return;\n    const newCleared = cleared.map(row => [...row]);\n    newCleared[r][c] = true;\n    setCleared(newCleared);\n    clearedCountRef.current += 1;\n    onThoughtsChange(prev => prev + \".\");\n\n    const totalCleared = clearedCountRef.current;\n    const totalCells = 25;\n    const newOpacity = Math.max(0.3, 1 - (totalCleared / (totalCells * 2))); // Fog regenerates a bit\n    setFogOpacity(newOpacity);\n\n    // After some time, fog can reappear to ensure continuous gameplay\n    if (totalCleared > totalCells * 0.75) {\n       setTimeout(() => {\n            const newClearedGrid = Array(5).fill(null).map(() => Array(5).fill(false));\n            setCleared(newClearedGrid);\n            clearedCountRef.current = 0;\n            setFogOpacity(1);\n       }, 2000);\n    }\n  };\n\n  return (\n    <div className=\"w-full h-full flex-1 flex flex-col items-center justify-center bg-gray-200/30 rounded-2xl p-4 gap-2 relative overflow-hidden\">\n      <p className=\"text-muted-foreground text-sm z-10\">Swipe to clear the mental fog.</p>\n       <div \n        className=\"absolute inset-0 bg-gradient-to-br from-primary to-secondary z-0\"\n      />\n      <div className=\"grid grid-cols-5 grid-rows-5 gap-1 w-full h-full aspect-square max-w-sm max-h-sm\">\n        {cleared.map((row, r) =>\n          row.map((isCleared, c) => (\n            <motion.div\n              key={`${r}-${c}`}\n              className=\"w-full h-full bg-slate-400/80 backdrop-blur-sm transition-opacity duration-700\"\n              onMouseEnter={() => handleSwipe(r, c)}\n              onTouchStart={() => handleSwipe(r, c)}\n              animate={{ opacity: isCleared ? 0 : fogOpacity }}\n              transition={{ duration: 0.7 }}\n            />\n          ))\n        )}\n      </div>\n    </div>\n  );\n};\n\n\n// --- ENERGY THREAD GAME (Tired) ---\nconst EnergyThreadGame = ({ onThoughtsChange }: { onThoughtsChange: React.Dispatch<React.SetStateAction<string>> }) => {\n    const [nodes, setNodes] = useState<{ id: number, x: number, y: number, color: string }[]>([]);\n    const [lines, setLines] = useState<{ from: number, to: number }[]>([]);\n    const [selected, setSelected] = useState<number | null>(null);\n\n    const generateNodes = () => {\n        const newNodes = [];\n        const colors = ['#FF5733', '#33FF57', '#3357FF', '#F333FF'];\n        for (let i = 0; i < 4; i++) {\n            newNodes.push({ id: i * 2, x: 50 + Math.random() * 50, y: 100 + i * 80, color: colors[i] });\n            newNodes.push({ id: i * 2 + 1, x: 250 + Math.random() * 50, y: 100 + i * 80, color: colors[i] });\n        }\n        setNodes(newNodes);\n        setLines([]);\n    };\n\n    useEffect(() => {\n        generateNodes();\n    }, []);\n    \n    useEffect(() => {\n        if (nodes.length > 0 && lines.length === nodes.length / 2) {\n            onThoughtsChange(prev => prev + \"||\");\n            setTimeout(generateNodes, 1000);\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [lines, nodes.length]);\n\n    const handleNodeClick = (id: number) => {\n        if (selected === null) {\n            setSelected(id);\n        } else {\n            const node1 = nodes.find(n => n.id === selected);\n            const node2 = nodes.find(n => n.id === id);\n            if (node1 && node2 && node1.color === node2.color && !lines.some(l => (l.from === selected && l.to === id) || (l.from === id && l.to === selected))) {\n                setLines([...lines, { from: selected, to: id }]);\n            }\n            setSelected(null);\n        }\n    };\n\n    return (\n        <div className=\"w-full h-full flex-1 flex flex-col items-center justify-center bg-indigo-100/30 rounded-2xl p-4 gap-2\">\n            <p className=\"text-muted-foreground text-sm\">Reconnect the energy threads.</p>\n            <div className=\"relative w-full h-full\">\n                <svg className=\"absolute w-full h-full\">\n                    {lines.map((line, i) => {\n                        const fromNode = nodes.find(n => n.id === line.from);\n                        const toNode = nodes.find(n => n.id === line.to);\n                        if (!fromNode || !toNode) return null;\n                        return (\n                            <motion.line\n                                key={i}\n                                x1={fromNode.x}\n                                y1={fromNode.y}\n                                x2={toNode.x}\n                                y2={toNode.y}\n                                stroke={fromNode.color}\n                                strokeWidth=\"4\"\n                                initial={{ pathLength: 0 }}\n                                animate={{ pathLength: 1 }}\n                                transition={{ duration: 0.5 }}\n                                style={{ filter: `drop-shadow(0 0 5px ${fromNode.color})`}}\n                            />\n                        );\n                    })}\n                </svg>\n                {nodes.map(node => (\n                    <motion.div\n                        key={node.id}\n                        className={`absolute w-8 h-8 rounded-full border-4 cursor-pointer`}\n                        style={{\n                            left: node.x - 16,\n                            top: node.y - 16,\n                            borderColor: node.color,\n                            boxShadow: `0 0 10px ${node.color}${selected === node.id ? ', 0 0 20px ' + node.color : ''}`,\n                            backgroundColor: 'white'\n                        }}\n                        onClick={() => handleNodeClick(node.id)}\n                        whileHover={{ scale: 1.2 }}\n                        animate={{ scale: selected === node.id ? 1.3 : 1 }}\n                    />\n                ))}\n            </div>\n        </div>\n    );\n};\n\n\n// --- MIND ALIGN GAME (Confused) ---\ntype Tile = { id: number; value: number; };\nconst MindAlignGame = ({ onThoughtsChange }: { onThoughtsChange: React.Dispatch<React.SetStateAction<string>> }) => {\n  const [tiles, setTiles] = useState<Tile[]>([]);\n  const [isCorrect, setIsCorrect] = useState(false);\n\n  const shuffle = (array: Tile[]) => [...array].sort(() => Math.random() - 0.5);\n\n  const generateLevel = () => {\n      setIsCorrect(false);\n      const newTiles = Array.from({ length: 4 }, (_, i) => ({ id: i, value: i + 1 }));\n      setTiles(shuffle(newTiles));\n  };\n  \n  useEffect(() => {\n    generateLevel();\n  }, []);\n\n  const onDragEnd = (result: any) => {\n    if (!result.destination) return;\n    const items = Array.from(tiles);\n    const [reorderedItem] = items.splice(result.source.index, 1);\n    items.splice(result.destination.index, 0, reorderedItem);\n    setTiles(items);\n\n    const isSorted = items.every((tile, index) => tile.value === index + 1);\n    if (isSorted) {\n      setIsCorrect(true);\n      onThoughtsChange(prev => prev + \"#\");\n      setTimeout(generateLevel, 1000);\n    }\n  };\n  \n  // This game requires react-beautiful-dnd, which is not in the project.\n  // We will simulate it with a simpler logic for now.\n  const handleTileClick = (clickedIndex: number) => {\n     // A simple swap logic for demonstration\n     const newTiles = [...tiles];\n     if (clickedIndex < newTiles.length -1) {\n        [newTiles[clickedIndex], newTiles[clickedIndex+1]] = [newTiles[clickedIndex+1], newTiles[clickedIndex]]\n        setTiles(newTiles);\n\n        const isSorted = newTiles.every((tile, index) => tile.value === index + 1);\n        if (isSorted) {\n            setIsCorrect(true);\n            onThoughtsChange(prev => prev + \"#\");\n            setTimeout(generateLevel, 1000);\n        }\n     }\n  }\n\n  return (\n    <div className=\"w-full h-full flex-1 flex flex-col items-center justify-center bg-accent/20 rounded-2xl p-4 gap-4\">\n      <p className=\"text-muted-foreground text-sm\">Align the fragments to form a clear thought.</p>\n       <div className=\"flex gap-3\">\n        {tiles.map((tile, index) => (\n           <motion.div\n            key={tile.id}\n            layout\n            onClick={() => handleTileClick(index)}\n            className={`w-16 h-24 rounded-lg flex items-center justify-center text-2xl font-bold cursor-pointer shadow-md\n                ${isCorrect ? 'bg-green-300' : 'bg-white'}`}\n            >\n            {tile.value}\n            </motion.div>\n        ))}\n      </div>\n      {isCorrect && <motion.p initial={{opacity:0}} animate={{opacity:1}} className=\"text-green-600 font-semibold\">Aligned!</motion.p>}\n    </div>\n  );\n};\n\n\nfunction PlaySession() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const mood = searchParams.get('mood');\n  const [clearedThoughts, setClearedThoughts] = useState('');\n\n  const handleTimeUp = () => {\n    localStorage.setItem('mindspring-thoughts', clearedThoughts);\n    router.replace(`/session/result?mood=${mood}`);\n  };\n\n  const renderGameForMood = () => {\n    switch (mood) {\n      case 'Overwhelmed':\n        return <WaveSorterGame onThoughtsChange={setClearedThoughts} />;\n      case 'Stressed':\n        return <TensionThreadsGame onThoughtsChange={setClearedThoughts} />;\n      case 'Confused':\n        return <MindAlignGame onThoughtsChange={setClearedThoughts} />;\n      case 'Foggy':\n        return <FoggyGame onThoughtsChange={setClearedThoughts} />;\n      case 'Tired':\n        return <EnergyThreadGame onThoughtsChange={setClearedThoughts} />;\n      case 'Full Mind':\n        return <ThoughtConstellationsGame onThoughtsChange={setClearedThoughts} />;\n      default:\n        // Default to a calming game if mood is not specified\n        return <TensionThreadsGame onThoughtsChange={setClearedThoughts} />;\n    }\n  };\n\n  return (\n    <div className=\"flex-1 flex flex-col w-full h-full p-4 relative\">\n      <GameTimer onTimeUp={handleTimeUp} />\n      {renderGameForMood()}\n    </div>\n  );\n}\n\nexport default function SessionPage() {\n  return (\n    <Suspense fallback={<div>Loading game...</div>}>\n      <PlaySession />\n    </Suspense>\n  );\n}\n\n    "],"names":[],"mappings":"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","debugId":null}}]
}